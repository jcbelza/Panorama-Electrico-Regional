<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Análisis Energético Regional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    
    <meta property="og:image" content="https://raw.githubusercontent.com/jcbelza/Panorama-Electrico-Regional/main/Miniaturaestadisticas.png">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jcbelza.github.io/Panorama-Electrico-Regional/">
    <meta property="og:title" content="Estadísticas del Sector Eléctrico Regional - CIER">
    <meta property="og:description" content="Capacidad, Producción, Pérdidas y otros.">
    
    
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://jcbelza.github.io/Panorama-Electrico-Regional/">
    <meta property="twitter:title" content="Estadísticas del Sector Eléctrico Regional - CIER">
    <meta property="twitter:description" content="Capacidad, Producción, Pérdidas y otros.">
    <meta property="twitter:image" content="https://raw.githubusercontent.com/jcbelza/Panorama-Electrico-Regional/main/Miniaturaestadisticas.png">


    
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A single-page dashboard architecture with interactive sections. A top navigation bar allows quick scrolling to 'Panorama General', 'Análisis de Renovables', 'Desafío de Pérdidas', and 'Contexto de Mercado'. The design uses a main interactive chart controlled by dropdowns and sliders for a high-level overview, followed by specific sections for deep dives into renewable sources and distribution losses. The final section contextualizes the data with themed, filterable news headlines from July 2025. This structure was chosen to provide a layered information experience, moving from general trends to specific details and real-world context, which is more engaging and user-friendly than a linear report format. -->
    <!-- Visualization & Content Choices: Data is presented using Chart.js canvas charts for full interactivity and responsiveness. Key metrics are shown as dynamic KPI cards. Goal: Compare/Change -> Interactive Bar/Line charts with year sliders and region toggles (e.g., Total Capacity, Generation). Goal: Organize/Inform -> A grid of smaller charts for each renewable source, with modals for detailed text and data tables (e.g., Solar, Wind). Goal: Relationships -> Side-by-side charts for distribution losses to compare % of generation vs. annual increase. Goal: Context -> Interactive cards filtering news headlines by theme (e.g., Storage, Regulation). This approach avoids static images, uses dynamic canvas rendering, and links quantitative data directly to qualitative analysis from the report and news. CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f7f4;
            color: #1f2937;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .small-chart-container {
            position: relative;
            width: 100%;
            height: 250px;
            max-height: 30vh;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover {
            color: #4f46e5;
        }
        .active-nav {
            color: #4f46e5;
            border-bottom: 2px solid #4f46e5;
        }
        .kpi-card {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .modal-bg {
            background-color: rgba(0,0,0,0.5);
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-30 shadow-sm">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-indigo-600">CIER - Análisis Energético</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#panorama" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Panorama General</a>
                        <a href="#renovables" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Análisis de Renovables</a>
                        <a href="#perdidas" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Desafío de Pérdidas</a>
                        <a href="#contexto" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">Contexto de Mercado</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        
        <section id="panorama" class="mb-16">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-0">Panel Interactivo de Análisis Energético Regional</h1>
            <p class="text-xs md:text-sm text-gray-400 font-medium mb-4">Coordinación Internacional del Área Corporativa</p>
            <p class="text-lg text-gray-600 mb-8">Una exploración de las tendencias en generación, capacidad y eficiencia en las regiones MUNDO y CSAM (Sudamérica y Centroamérica) (2014-2023).</p>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6 mb-8">
                <div class="kpi-card p-5 rounded-lg col-span-1 sm:col-span-2 lg:col-span-2">
                    <h3 class="text-sm font-medium text-gray-500">Crecimiento Anual Capacidad Total 2023 (MUNDO)</h3>
                    <p id="kpi-total-worl" class="mt-1 text-3xl font-semibold text-indigo-600">6.54%</p>
                </div>
                <div class="kpi-card p-5 rounded-lg col-span-1 sm:col-span-2 lg:col-span-2">
                    <h3 class="text-sm font-medium text-gray-500">Crecimiento Anual Capacidad Total 2023 (CSAM)</h3>
                    <p id="kpi-total-csam" class="mt-1 text-3xl font-semibold text-amber-600">5.24%</p>
                </div>
                 <div class="kpi-card p-5 rounded-lg col-span-1 sm:col-span-2 lg:col-span-2">
                    <h3 class="text-sm font-medium text-gray-500">Crecimiento Anual Renovable 2023 (MUNDO)</h3>
                    <p id="kpi-ren-worl" class="mt-1 text-3xl font-semibold text-indigo-600">14.48%</p>
                </div>
                <div class="kpi-card p-5 rounded-lg col-span-1 sm:col-span-2 lg:col-span-2">
                    <h3 class="text-sm font-medium text-gray-500">Crecimiento Anual Renovable 2023 (CSAM)</h3>
                    <p id="kpi-ren-csam" class="mt-1 text-3xl font-semibold text-amber-600">8.38%</p>
                </div>
                <div class="kpi-card p-5 rounded-lg col-span-1 sm:col-span-2 lg:col-span-2">
                    <h3 class="text-sm font-medium text-gray-500">Pérdidas/Generación 2023 (MUNDO)</h3>
                    <p id="kpi-loss-worl" class="mt-1 text-3xl font-semibold text-indigo-600">6.65%</p>
                </div>
                <div class="kpi-card p-5 rounded-lg col-span-1 sm:col-span-2 lg:col-span-2">
                    <h3 class="text-sm font-medium text-gray-500">Pérdidas/Generación 2023 (CSAM)</h3>
                    <p id="kpi-loss-csam" class="mt-1 text-3xl font-semibold text-red-600">14.65%</p>
                </div>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
                    <div class="w-full md:w-auto">
                        <label for="chart-selector" class="block text-sm font-medium text-gray-700">Seleccionar Métrica Principal</label>
                        <select id="chart-selector" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                            <option value="totalCapacity" selected>Capacidad Energética Total</option>
                            <option value="generation">Generación de Electricidad</option>
                            <option value="renewableCapacity">Capacidad Renovable Total</option>
                        </select>
                    </div>
                    <div class="w-full md:w-1/2">
                        <label for="year-slider" class="block text-sm font-medium text-gray-700">Filtrar por Año: <span id="year-label" class="font-bold text-indigo-600">2023</span></label>
                        <input type="range" id="year-slider" min="2014" max="2023" value="2023" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>
                <div id="main-chart-text" class="mt-4 text-gray-600 text-sm leading-relaxed"></div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-4 text-gray-800 border-b-2 border-gray-200 pb-2">Aumento Porcentual Anual en Generación de Electricidad</h3>
                <p class="mb-4 text-gray-700 leading-relaxed">La generación eléctrica presenta mayor volatilidad. Ambas regiones experimentaron caídas en 2020, posiblemente por factores globales, pero se recuperaron en 2021. El crecimiento anual compuesto (CAGR) de MUNDO (2.09%) es superior al de CSAM (1.0%).</p>
                <div class="chart-container">
                    <canvas id="generationChart"></canvas>
                </div>
            </div>
        </section>

        <section id="renovables" class="mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Análisis Detallado de Energías Renovables</h2>
            <p class="text-lg text-gray-600 mb-8">Explore el crecimiento de cada fuente de energía renovable. Haga clic en "Ver Detalle" para más información.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4">Energía Solar</h3>
                    <div class="small-chart-container">
                        <canvas id="solarChart"></canvas>
                    </div>
                    <button onclick="openModal('solar')" class="mt-4 w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition">Ver Detalle</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4">Energía Eólica</h3>
                    <div class="small-chart-container">
                        <canvas id="windChart"></canvas>
                    </div>
                    <button onclick="openModal('wind')" class="mt-4 w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition">Ver Detalle</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4">Energía Hidroeléctrica</h3>
                    <div class="small-chart-container">
                        <canvas id="hydroChart"></canvas>
                    </div>
                     <button onclick="openModal('hydro')" class="mt-4 w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition">Ver Detalle</button>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4">Biomasa y Residuos</h3>
                    <div class="small-chart-container">
                        <canvas id="biomassChart"></canvas>
                    </div>
                    <button onclick="openModal('biomass')" class="mt-4 w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition">Ver Detalle</button>
                </div>
            </div>
        </section>

        <section id="perdidas" class="mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">El Desafío de las Pérdidas en Distribución</h2>
            <p class="text-lg text-gray-600 mb-8">Análisis de la eficiencia de la red, comparando las pérdidas como porcentaje de la generación total.</p>
            <div class="bg-white p-6 rounded-lg shadow-md">
                 <div class="chart-container" style="max-height: 45vh;">
                    <canvas id="lossesPercentageChart"></canvas>
                </div>
                <div id="losses-chart-text" class="mt-4 text-gray-600 text-sm leading-relaxed"></div>
            </div>
        </section>

        <section id="contexto">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Contexto de Mercado: Noticias de Julio 2025</h2>
            <p class="text-lg text-gray-600 mb-8">Las noticias de la región CSAM confirman y contextualizan las tendencias observadas en los datos, destacando tres temas clave.</p>
            <div id="news-container" class="space-y-4">
            </div>
        </section>

    </main>
    
    <footer class="mt-16 py-4 border-t border-gray-200 text-center">
        <p class="text-xs text-gray-500">Fuente de los datos: EIA</p>
    </footer>

    <div id="details-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 modal-bg">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center border-b pb-3">
                    <h3 id="modal-title" class="text-2xl font-bold"></h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-800">&times;</button>
                </div>
                <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2">Análisis</h4>
                        <p id="modal-text" class="text-sm text-gray-600 leading-relaxed"></p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2">Datos de Crecimiento Anual (%)</h4>
                        <div id="modal-table-container" class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Región</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">2019</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">2020</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">2021</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">2022</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">2023</th>
                                    </tr>
                                </thead>
                                <tbody id="modal-table-body" class="bg-white divide-y divide-gray-200 text-sm">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const dataStore = {
                years: Array.from({length: 10}, (_, i) => 2014 + i),
                totalCapacity: {
                    mundo: [3.97, 4.56, 4.56, 4.04, 4.26, 3.60, 4.84, 4.71, 4.20, 6.54],
                    csam: [3.11, 4.24, 6.31, 3.40, 3.31, 3.33, 3.38, 4.69, 4.10, 5.24]
                },
                generation: {
                    mundo: [2.63, 1.18, 2.48, 2.97, 3.22, 1.51, 0.11, 5.21, 2.31, 2.06],
                    csam: [-0.06, 2.57, 0.53, -0.46, 1.29, 0.71, -1.71, 4.49, 1.35, 1.36]
                },
                renewableCapacity: {
                    mundo: [9.05, 9.11, 8.82, 8.64, 8.04, 7.91, 11.11, 9.24, 10.15, 14.48],
                    csam: [5.68, 5.50, 8.71, 4.74, 5.22, 5.00, 4.02, 6.01, 7.68, 8.38]
                },
                solar: {
                    mundo: [33.78, 26.59, 31.69, 31.68, 23.66, 21.00, 22.65, 19.83, 22.93, 32.83],
                    csam: [103.65, 180.95, 49.13, 92.55, 43.42, 48.67, 47.67, 53.39, 56.27, 40.37]
                },
                wind: {
                    mundo: [16.50, 19.15, 12.17, 10.15, 9.74, 9.98, 18.18, 12.38, 9.52, 12.65],
                    csam: [105.55, 49.78, 28.99, 19.79, 20.36, 8.43, 15.65, 21.27, 12.49, 17.65]
                },
                hydro: {
                    mundo: [3.68, 3.07, 2.64, 1.97, 1.99, 1.59, 1.91, 1.11, 1.76, 0.74],
                    csam: [3.24, 2.81, 7.03, 2.29, 2.98, 2.83, 0.27, 0.16, 0.84, 0.59]
                },
                biomass: {
                    mundo: [7.15, 4.93, 9.17, 5.91, 5.66, 5.06, 7.36, 7.12, 6.73, 6.93],
                    csam: [4.17, 4.20, 7.25, 2.91, 1.81, 4.98, 2.07, 2.56, 4.21, 3.74]
                },
                lossesPercentage: {
                    years: Array.from({length: 10}, (_, i) => 2014 + i),
                    mundo: [8.01, 7.91, 7.82, 7.69, 7.42, 7.22, 7.02, 6.85, 6.72, 6.65],
                    csam: [15.65, 15.58, 15.62, 15.54, 15.35, 15.02, 14.85, 14.78, 14.73, 14.65]
                }
            };

            const textData = {
                totalCapacity: "El crecimiento de la capacidad energética total ha sido constante, reflejando un aumento global en la demanda. MUNDO muestra una tendencia ascendente, mientras que CSAM, a pesar de picos como el de 2016, ha tenido una expansión más moderada.",
                generation: "La generación eléctrica presenta mayor volatilidad. Ambas regiones experimentaron caídas en 2020, posiblemente por factores globales, pero se recuperaron en 2021. El crecimiento anual compuesto (CAGR) de MUNDO (2.09%) es superior al de CSAM (1.0%).",
                renewableCapacity: "El crecimiento de las renovables supera significativamente al de la capacidad total, demostrando una acelerada transición energética. MUNDO ha liderado esta expansión de forma consistente, alcanzando un pico de 14.48% en 2023.",
                solar: "La energía solar es el principal motor del crecimiento renovable, con tasas de aumento extraordinarias en ambas regiones. CSAM ha mostrado picos de crecimiento explosivos, mientras que MUNDO ha mantenido un ritmo de expansión muy alto y más estable.",
                wind: "La capacidad eólica también muestra un crecimiento notable, aunque con mayor variabilidad que la solar. CSAM tuvo un impulso inicial masivo en 2014, y desde entonces ambas regiones han continuado expandiendo su capacidad a tasas significativas.",
                hydro: "Como tecnología madura, la hidroelectricidad presenta un crecimiento más moderado. CSAM tuvo un pico en 2016, pero su crecimiento se ha ralentizado en los últimos años, mientras que MUNDO ha mantenido una expansión más constante pero de menor magnitud.",
                biomass: "El crecimiento en biomasa y residuos es el más bajo entre las renovables analizadas. MUNDO ha mantenido un crecimiento constante, mientras que el rendimiento de CSAM ha sido más irregular.",
                losses: "Las pérdidas de distribución son un desafío persistente, con una marcada diferencia entre ambas regiones. MUNDO ha logrado una reducción constante y significativa, reflejando una mejora en la eficiencia de sus redes. En contraste, CSAM mantiene niveles de pérdidas consistentemente altos, lo que sugiere problemas estructurales en su infraestructura de transmisión y distribución."
            };

            const newsData = [
                { "title": "Gran avance e interés en proyectos de almacenamiento para la región", "theme": "Almacenamiento (BESS)" },
                { "title": "Regulación en la región Andina: especialistas advierten que su definición será decisiva para captar inversiones y escalar el almacenamiento", "theme": "Marco Regulatorio" },
                { "title": "Tecnológicas líderes apuestan por soluciones integradas para escalar renovables en la región", "theme": "Almacenamiento (BESS)" },
                { "title": "República Dominicana inaugura línea de 138 kV para ampliar renovables y reducir pérdidas", "theme": "Transmisión" },
                { "title": "El sector renovable dominicano espera definiciones: licitación con BESS prevista para 2025 aún sin pliegos", "theme": "Almacenamiento (BESS)" },
                { "title": "Argentina recibió casi 30 ofertas por más de 1300 MW en su histórica primera licitación de baterías", "theme": "Almacenamiento (BESS)" },
                { "title": "El Gobierno de Argentina definió las primeras tres obras de transmisión a licitar para el sector privado", "theme": "Transmisión" },
                { "title": "Nuevo informe de Colombia alerta por infraestructura de transmisión envejecida y desincentivos a la autogeneración", "theme": "Transmisión" },
                { "title": "Advierten que México necesita 15000 km de nuevas redes de transmisión para integrar 20 GW renovables al 2030", "theme": "Transmisión" },
                { "title": "Gobierno de Brasil abre debate sobre la metodología para seleccionar áreas para proyectos eólicos offshore", "theme": "Marco Regulatorio" },
                { "title": "ANEEL de Brasil confirmó que el reglamento de baterías se publicará durante el segundo semestre del 2025", "theme": "Marco Regulatorio" }
            ];
            
            let mainChart;
            const charts = {};

            const barChartConfig = {
                type: 'bar',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) { return value + '%' }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw.toFixed(2)}%`;
                                }
                            }
                        },
                        datalabels: {
                            anchor: 'end',
                            align: 'top',
                            color: '#4b5563',
                            font: {
                                weight: 'bold'
                            },
                            formatter: (value) => `${value.toFixed(2)}%`
                        }
                    }
                },
                plugins: [ChartDataLabels]
            };
            
            const lineChartConfig = {
                type: 'line',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) { return value + '%' }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw.toFixed(2)}%`;
                                }
                            }
                        }
                    }
                }
            };
            
            function createChart(ctx, data, type = 'bar') {
                let config = type === 'bar' ? JSON.parse(JSON.stringify(barChartConfig)) : JSON.parse(JSON.stringify(lineChartConfig));
                config.data = data;
                return new Chart(ctx, config);
            }

            function updateMainChart() {
                const selectedMetric = document.getElementById('chart-selector').value;
                const year = parseInt(document.getElementById('year-slider').value);
                
                const data = dataStore[selectedMetric];
                const yearIndex = dataStore.years.indexOf(year);

                if (mainChart) mainChart.destroy();
                
                const ctx = document.getElementById('mainChart').getContext('2d');
                mainChart = createChart(ctx, {
                    labels: dataStore.years,
                    datasets: [
                        {
                            label: 'MUNDO',
                            data: data.mundo,
                            backgroundColor: 'rgba(79, 70, 229, 0.8)',
                            borderColor: 'rgba(79, 70, 229, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'CSAM',
                            data: data.csam,
                            backgroundColor: 'rgba(217, 119, 6, 0.8)',
                            borderColor: 'rgba(217, 119, 6, 1)',
                            borderWidth: 1
                        }
                    ]
                });
                
                document.getElementById('main-chart-text').textContent = textData[selectedMetric];
                updateKPIs(year);
            }
            
            function initGenerationChart() {
                const ctx = document.getElementById('generationChart').getContext('2d');
                charts.generation = createChart(ctx, {
                    labels: dataStore.years,
                    datasets: [
                        {
                            label: 'MUNDO',
                            data: dataStore.generation.mundo,
                            backgroundColor: 'rgba(79, 70, 229, 0.8)',
                            borderColor: 'rgba(79, 70, 229, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'CSAM',
                            data: dataStore.generation.csam,
                            backgroundColor: 'rgba(217, 119, 6, 0.8)',
                            borderColor: 'rgba(217, 119, 6, 1)',
                            borderWidth: 1
                        }
                    ]
                });
            }

            function updateKPIs(year) {
                const yearIndex = dataStore.years.indexOf(year);
                document.getElementById('kpi-total-worl').textContent = `${dataStore.totalCapacity.mundo[yearIndex].toFixed(2)}%`;
                document.getElementById('kpi-total-csam').textContent = `${dataStore.totalCapacity.csam[yearIndex].toFixed(2)}%`;
                document.getElementById('kpi-ren-worl').textContent = `${dataStore.renewableCapacity.mundo[yearIndex].toFixed(2)}%`;
                document.getElementById('kpi-ren-csam').textContent = `${dataStore.renewableCapacity.csam[yearIndex].toFixed(2)}%`;
                document.getElementById('kpi-loss-worl').textContent = `${dataStore.lossesPercentage.mundo[yearIndex].toFixed(2)}%`;
                document.getElementById('kpi-loss-csam').textContent = `${dataStore.lossesPercentage.csam[yearIndex].toFixed(2)}%`;
                document.getElementById('year-label').textContent = year;
            }

            function initSmallCharts() {
                const smallChartIds = ['solar', 'wind', 'hydro', 'biomass'];
                smallChartIds.forEach(id => {
                    const ctx = document.getElementById(`${id}Chart`).getContext('2d');
                    charts[id] = createChart(ctx, {
                        labels: dataStore.years.slice(-5),
                        datasets: [
                            {
                                label: 'MUNDO',
                                data: dataStore[id].mundo.slice(-5),
                                backgroundColor: 'rgba(79, 70, 229, 0.8)'
                            },
                            {
                                label: 'CSAM',
                                data: dataStore[id].csam.slice(-5),
                                backgroundColor: 'rgba(217, 119, 6, 0.8)'
                            }
                        ]
                    });
                });
            }

            function initLossesChart() {
                const ctx = document.getElementById('lossesPercentageChart').getContext('2d');
                charts.losses = createChart(ctx, {
                    labels: dataStore.lossesPercentage.years,
                    datasets: [
                        {
                            label: 'MUNDO',
                            data: dataStore.lossesPercentage.mundo,
                            borderColor: 'rgba(79, 70, 229, 1)',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            fill: true,
                            tension: 0.1
                        },
                        {
                            label: 'CSAM',
                            data: dataStore.lossesPercentage.csam,
                            borderColor: 'rgba(217, 119, 6, 1)',
                            backgroundColor: 'rgba(217, 119, 6, 0.1)',
                            fill: true,
                            tension: 0.1
                        }
                    ]
                }, 'line');
                document.getElementById('losses-chart-text').textContent = textData.losses;
            }
            
            function renderNews() {
                const newsContainer = document.getElementById('news-container');
                const themes = [...new Set(newsData.map(item => item.theme))];
                
                themes.forEach(theme => {
                    const themeArticles = newsData.filter(article => article.theme === theme);
                    
                    let articlesHtml = themeArticles.map(article => `<li class="text-sm text-gray-600">${article.title}</li>`).join('');

                    const themeHtml = `
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-semibold mb-3 text-indigo-700">${theme}</h3>
                            <ul class="space-y-2 list-disc list-inside">
                                ${articlesHtml}
                            </ul>
                        </div>
                    `;
                    newsContainer.innerHTML += themeHtml;
                });
            }

            document.getElementById('chart-selector').addEventListener('change', updateMainChart);
            document.getElementById('year-slider').addEventListener('input', () => {
                const year = document.getElementById('year-slider').value;
                updateKPIs(parseInt(year));
            });

            Chart.register(ChartDataLabels);
            updateMainChart();
            initGenerationChart();
            initSmallCharts();
            initLossesChart();
            renderNews();
        });

        function openModal(type) {
            const modal = document.getElementById('details-modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const tableBody = document.getElementById('modal-table-body');
            
            const titles = {
                solar: 'Energía Solar',
                wind: 'Energía Eólica',
                hydro: 'Energía Hidroeléctrica',
                biomass: 'Biomasa y Residuos'
            };

            const dataStore = {
                solar: {
                    mundo: [21.00, 22.65, 19.83, 22.93, 32.83],
                    csam: [48.67, 47.67, 53.39, 56.27, 40.37]
                },
                wind: {
                    mundo: [9.98, 18.18, 12.38, 9.52, 12.65],
                    csam: [8.43, 15.65, 21.27, 12.49, 17.65]
                },
                hydro: {
                    mundo: [1.59, 1.91, 1.11, 1.76, 0.74],
                    csam: [2.83, 0.27, 0.16, 0.84, 0.59]
                },
                biomass: {
                    mundo: [5.06, 7.36, 7.12, 6.73, 6.93],
                    csam: [4.98, 2.07, 2.56, 4.21, 3.74]
                }
            };
            
            const textData = {
                solar: "La energía solar es el principal motor del crecimiento renovable, con tasas de aumento extraordinarias en ambas regiones. CSAM ha mostrado picos de crecimiento explosivos, mientras que MUNDO ha mantenido un ritmo de expansión muy alto y más estable.",
                wind: "La capacidad eólica también muestra un crecimiento notable, aunque con mayor variabilidad que la solar. CSAM tuvo un impulso inicial masivo en 2014, y desde entonces ambas regiones han continuado expandiendo su capacidad a tasas significativas.",
                hydro: "Como tecnología madura, la hidroelectricidad presenta un crecimiento más moderado. CSAM tuvo un pico en 2016, pero su crecimiento se ha ralentizado en los últimos años, mientras que MUNDO ha mantenido una expansión más constante pero de menor magnitud.",
                biomass: "El crecimiento en biomasa y residuos es el más bajo entre las renovables analizadas. MUNDO ha mantenido un crecimiento constante, mientras que el rendimiento de CSAM ha sido más irregular."
            };

            title.textContent = titles[type];
            text.textContent = textData[type];
            
            const data = dataStore[type];
            tableBody.innerHTML = `
                <tr>
                    <td class="px-4 py-2 font-medium text-gray-900">MUNDO</td>
                    ${data.mundo.map(val => `<td class="px-4 py-2 text-gray-500">${val.toFixed(2)}</td>`).join('')}
                </tr>
                <tr>
                    <td class="px-4 py-2 font-medium text-gray-900">CSAM</td>
                    ${data.csam.map(val => `<td class="px-4 py-2 text-gray-500">${val.toFixed(2)}</td>`).join('')}
                </tr>
            `;

            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            const modal = document.getElementById('details-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }
    </script>
</body>
</html>





